<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mycover AI SDK</title>
  <link href="./assets/styles.css" rel="stylesheet"/>
</head>
<body>
<main id="main">
  <div class="text-center p-5 w-100">
    <img src="./assets/logos/mycover.svg" class="img-fluid m-5 mx-auto" style="height: 40px" alt="">
  </div>
  <div class="card mx-auto">
    <div class="info d-flex align-items-center">
      <div class="mx-2">
        <img src="./assets/icons/info.svg" class="img-fluid" style="height: 16px; margin-top: 7px" alt="">
      </div>
      <div>Enter details as they appear on legal documents.</div>
    </div>
    <form id="form" action="">
      <div>

      </div>
      <div id="form_fields"></div>
      <button id="" type="submit" class="btn mt-5">Continue</button>
      <div style="margin: 27px 0 0"
           class="text-center d-flex justify-content-center align-items-center text-14 text-gray-500">Underwritten by
        <div class="mx-2"><img src="./assets/logos/hygeia.svg" class="img-fluid"
                               style="height: 18px; margin-top: 12px" alt=""></div>
      </div>
    </form>
  </div>
  <div class="text-center text-gray-400 mt-5">Powered by <span class="text-white">Mycover.ai</span></div>
  <img src="./assets/icons/chevrons.svg" class="chevrons" alt="">
</main>
<script>
  const form_fields = [
    {
      label: 'First Name',
      placeholder: 'Samuel',
      description: 'First name as shown on BVN',
      full_description: 'First name as shown on BVN',
      name: 'first_name',
      field_type: 'input',
      type: 'text',
      data_type: 'string',
      data_source: 'user_defined',
      min: 0,
      max: 0,
      required: true
    },
    {
      label: 'Last Name',
      placeholder: 'Ebong',
      description: 'Last name as shown on BVN',
      full_description: 'Last name as shown on BVN',
      name: 'last_name',
      field_type: 'input',
      type: 'text',
      data_type: 'string',
      data_source: 'user_defined',
      min: 0,
      max: 0,
      required: true
    },
    {
      label: 'Email',
      placeholder: 'alexandra@gmail.com',
      description: '',
      full_description: '',
      name: 'email',
      field_type: 'input',
      type: 'email',
      data_type: 'string',
      data_source: 'user_defined',
      min: 0,
      max: 0,
      required: true
    },
  ]

  function createFormButton() {

  }

  function createFormField() {
    form_fields.forEach(field => {
      const form_group = document.createElement("div");
      form_group.classList.add('form-group')


      const label = document.createElement("label");
      label.setAttribute('for', field.name)
      let textNode = document.createTextNode(field.label);
      label.appendChild(textNode);
      form_group.appendChild(label)

      if (field.full_description.length > 0) {
        const help = document.createElement("div");
        help.classList.add('help')
        help.setAttribute('title', field.full_description)
        form_group.appendChild(help)
      }

      const input = document.createElement("input");
      input.classList.add('form-control')
      input.setAttribute('id', field.name)
      input.setAttribute('placeholder', field.placeholder)
      input.setAttribute('type', field.data_type)
      input.setAttribute('min', field.min)
      input.setAttribute('max', field.max)
      input.setAttribute('required', field.required)

      form_group.appendChild(input)

      document.querySelector('#form_fields').appendChild(form_group)
    })
  }

  createFormField()

  document.querySelectorAll('.help').forEach(help => {
    help.addEventListener('click', (e) => {
      showHelpText(e, help)
    })
    help.addEventListener('mouseleave', (e) => {
      destroyHelpTextElement(e, help)
    })
  })

  function showHelpText(e, elt) {
    let helpText = document.createElement('div')
    helpText.classList.add('help-text')
    helpText.style.left = `${e.clientX}px`
    helpText.style.top = `${e.clientY - 30}px`
    let textNode = document.createTextNode(elt.title);
    helpText.appendChild(textNode);
    elt.appendChild(helpText)
  }

  function destroyHelpTextElement(e, elt) {
    document.querySelectorAll('.help-text').forEach(elt => elt.remove())
  }
</script>
</body>
</html>
